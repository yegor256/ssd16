% (The MIT License)
%
% Copyright (c) 2021 Yegor Bugayenko
%
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the 'Software'), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
%
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
%
% THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{inno}[00.00.0000 0.0.0 Innopolis Style]

\newif\ifwhite
\DeclareOption{white}{\whitetrue}
\ProcessOptions\relax

\RequirePackage{geometry}
  \geometry{paperwidth=16in, paperheight=9in, left=4in, right=2in, top=1.5in, bottom=1.5in}
\RequirePackage[absolute]{textpos}
  \TPGrid{16}{16}
\RequirePackage{xcolor}
  \definecolor{white}{HTML}{EEEEEE}
  \definecolor{red}{HTML}{ED474A}
  \definecolor{orange}{HTML}{F06543}
  \definecolor{black}{HTML}{232527}
  \definecolor{grey}{HTML}{C0BCB5}
  \definecolor{green}{HTML}{5C946E}
  \definecolor{blue}{HTML}{5299D3}
\RequirePackage{pagecolor}
\RequirePackage[tt=false,type1=true]{libertine}
\RequirePackage{microtype}
\RequirePackage{href-ul}
\RequirePackage{multicol}
\RequirePackage{anyfontsize}
\RequirePackage{varwidth}
\RequirePackage{verbatim}
\RequirePackage[fontsize=24pt]{fontsize} % to make fonts larger
\RequirePackage[inline]{enumitem}
\RequirePackage[nocn]{ffcode}
\RequirePackage{multirow}
\RequirePackage{changepage}
\RequirePackage{tabularx}
\RequirePackage{amsmath}
\RequirePackage{soul}
\RequirePackage{tikz}
  \RequirePackage{tikzpagenodes}
  \usetikzlibrary{arrows}
  \usetikzlibrary{decorations}
  \usetikzlibrary{decorations.pathmorphing}
  \usetikzlibrary{intersections}
  \usetikzlibrary{positioning}
  \usetikzlibrary{backgrounds}
  \usetikzlibrary{calc}
  \usetikzlibrary{shapes.arrows}
\RequirePackage{crumbs}

\RequirePackage{fancyhdr}
  \pagestyle{fancy}
  \renewcommand{\headrulewidth}{0pt}
  \fancyhf{}
  \renewcommand\crumb[2]{%
    \ifnum\value{crumbi}=1\else\hspace{1em}\fi
    \ifnum\value{crumbi}=\value{section}%
      {\setulcolor{blue}\color{blue}\ul{#1}}%
    \else%
      #1%
    \fi%
  }
  \renewcommand\subcrumb[2]{%
    \ifnum\value{subcrumbi}=1\else\hspace{0.5em}\fi
    \ifnum\value{subcrumbi}=\value{subsection}%
      {\setulcolor{blue}\color{blue}\ul{#1}}%
    \else%
      #1%
    \fi%
  }
  \fancyhead[L]{%
    \ifx\crumbs\empty\else
      \begin{textblock}{12}(1,1)%
        \ifnum\value{section}=0\else
          {\small\ttfamily\crumbs}
          \ifnum\value{subsection}=0\else
            \\[6pt]
            {\quad\scriptsize\ttfamily\color{gray}[ \subcrumbs{} ]}
          \fi
        \fi
      \end{textblock}%
    \fi
  }
  \RequirePackage{lastpage}
  \fancyhead[R]{%
    \ifnum\value{page}=1\else%
      \begin{textblock}{4}[1,0](15,1)%
        {\ttfamily\normalsize {\thepage{}}{\footnotesize{\color{grey}/\pageref{LastPage}}}}
      \end{textblock}%
      \ifnum\value{minutes}=0\else%
        \begin{textblock}{1}[1,0](15.8,0.2)%
          \tikz{\node[inner sep=2pt,circle,draw=grey]{\color{grey}\scriptsize\ttfamily\theminutes{}};}
        \end{textblock}%
      \fi
    \fi
  }

\newcommand\innoLeft[1]{%
  \fancyfoot[L]{%
    \ifnum\value{page}=1\else%
      \begin{textblock}{8}[0,1](1,15)%
        {\color{grey}\scriptsize\ttfamily #1}
      \end{textblock}%
    \fi
  }
}

\newcommand\innoRight[1]{%
  \fancyfoot[R]{%
    \ifnum\value{page}=1\else%
      \begin{textblock}{8}[1,1](15,15)%
        {\color{grey}\scriptsize\ttfamily #1}
      \end{textblock}%
    \fi
  }
}

\AtBeginDocument{%
  \ifwhite\else
    \pagecolor{black}
    \color{white}
  \fi
  \raggedbottom%
  \raggedright%
  \raggedcolumns%
  \setlength\topskip{0pt}%
  \setlength\headheight{32pt}%
  \setlength\footskip{32pt}%
  \setlength\parindent{0pt}%
  \setlength\parskip{18pt}%
  \setlength\columnsep{32pt}%
  \normalsize%
  \sffamily%
}

\endinput